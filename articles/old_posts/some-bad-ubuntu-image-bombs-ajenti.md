# Ubuntu 安装 Ajenti 的坑

% xtlsoft, 2017-02-25 19:53:52

<p><font style="background-color: rgb(255, 255, 255);">本博客搭建在ArukasCloud上面，用的rastasheep/ubuntu-sshd镜像，源用的cn.archive.ubuntu.com（日本服务器，但是图方便，和本地保持一致，用了中国区cdn）。</font></p><p><font style="background-color: rgb(255, 255, 255);">准备安装AjentiV服务器面板（本地安装一切正常，测试环境：VBox+Ubuntu Kylin 16.04 LTS，源：cn.archive.ubuntu.com）。</font></p><p><font style="background-color: rgb(255, 255, 255);">安装时，有一个依赖包，叫做apt-show-versions。这个可以查看安装应用的版本。就是在执行他的post-install脚本，出错了，返回255。</font></p><p><font style="background-color: rgb(255, 255, 255);">上网查资料，google、bing，都是没用的。尝试过apt -f install，换过源，也apt-get autoremove &amp;&amp; apt-get upgrade，任然无效。</font></p><p><font style="background-color: rgb(255, 255, 255);">还好不是什么重要的功能，没有Ajenti面板也可以运行。</font></p><p><font style="background-color: rgb(255, 255, 255);">于是，我就用之前的ubuntu开发经验，打包了一个自己的名为apt-show-versions且没有任何功能的包来蒙骗apt。</font></p><p><font style="background-color: rgb(255, 255, 255);">P.S. 这个Ubuntu14.04死活不能用dh_make，本地还没有14.04 Server LTS的环境，只好用ubuntu kylin开发者平台提供的debian目录。</font></p><p>由于过程比较繁琐，故提供一个一键修复命令：（请使用直接ROOT运行(sudo不行)）</p><pre>wget http://xtlsoft.github.io/files/sh/ubuntu/ajenti/fix-apt.sh &amp;&amp; chmod +x ./fix-apt.sh &amp;&amp; ./fix-apt.sh</pre>
